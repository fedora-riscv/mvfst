From 3a4dac08c96c7e32e45456674e4653b5f4b6257c Mon Sep 17 00:00:00 2001
From: Michel Lind <salimma@fedoraproject.org>
Date: Mon, 11 Sep 2023 22:03:32 -0500
Subject: [PATCH 1/3] Allow overriding where CMake module files are installed

Signed-off-by: Michel Lind <salimma@fedoraproject.org>
---
 CMakeLists.txt | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index ad054684..2f032305 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -19,6 +19,9 @@ set(CMAKE_MODULE_PATH
   "${CMAKE_CURRENT_SOURCE_DIR}/build/fbcode_builder/CMake"
   ${CMAKE_MODULE_PATH})
 
+set(CMAKE_INSTALL_MODULE_DIR ${CMAKE_INSTALL_LIBDIR}/cmake/mvfst CACHE STRING
+    "The subdirectory where CMake module files should be installed")
+
 include(FBBuildOptions)
 fb_activate_static_library_option()
 
@@ -105,16 +108,16 @@ install(
   EXPORT mvfst-exports
   FILE mvfst-targets.cmake
   NAMESPACE mvfst::
-  DESTINATION lib/cmake/mvfst/
+  DESTINATION ${CMAKE_INSTALL_MODULE_DIR}
 )
 
 include(CMakePackageConfigHelpers)
 configure_package_config_file(
   cmake/mvfst-config.cmake.in
   ${CMAKE_CURRENT_BINARY_DIR}/mvfst-config.cmake
-  INSTALL_DESTINATION lib/cmake/mvfst/
+  INSTALL_DESTINATION ${CMAKE_INSTALL_MODULE_DIR}
 )
 install(
   FILES ${CMAKE_CURRENT_BINARY_DIR}/mvfst-config.cmake
-  DESTINATION lib/cmake/mvfst/
+  DESTINATION ${CMAKE_INSTALL_MODULE_DIR}
 )
-- 
2.41.0

